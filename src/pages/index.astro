---
import IndexNavbar from "../components/index-navbar.astro";
import Layout from "../layouts/Layout.astro";
import HomeHero from "../components/home/home-hero.astro";
import { useStrapi } from "../api/strapi";
import HomeHistory from "../components/home/home-history.astro";
import HomeRedirection from "../components/home/home-redirection.astro";
import ContactImage from "../assets/images/contact.jpg";
import SalonsImage from "../assets/images/salons.jpg";
import TerrasseImage from "../assets/images/terrasse.jpg";
import TablesForegroundImage from "../assets/images/tables-foreground.jpg";
import CuisineImage from "../assets/images/cuisine.jpg";
import { Image } from "astro:assets";

const listLinks = {
  "/": "Accueil",
  "/cartes": "Cartes",
  "/salons": "Salons",
  "/contact": "Contact",
};

const listRedirections = [
  {
    title: "Cartes",
    description: "Accéder aux cartes menu en différentes langues",
    link: "/cartes",
    image: TerrasseImage,
    alternative: "Terrasse extérieure du café vienne dressée pour le service",
  },
  {
    title: "Salons",
    description: "Voir les différentes salons privées pour vos événements",
    link: "/salons",
    image: SalonsImage,
    alternative: "Salon privé du café vienne décoré pour un événement",
  },
  {
    title: "Contact",
    description:
      "Informations détaillé sur le Café Vienne et comment nous contacter",
    link: "/contact",
    image: ContactImage,
    alternative: "Logo café vienne sur vitre texturé avec journal du jour",
  },
];

const strapi = useStrapi("fr");
const strapiAccueil = await strapi.getAccueil();
const strapiCarte = await strapi.getCarte();
const listDay = ["lundi", "mardi", "mercredi", "jeudi", "vendredi"] as const;
const { entete, histoire, locale } = strapiAccueil.data.attributes;
---

<Layout title="" lang="fr">
  <IndexNavbar links={listLinks} />
  <HomeHero entete={entete} />
  <div class="bg-dark w-full border-t-4 border-secondary my-8 border-b-2 h-2">
  </div>
  <HomeHistory history={histoire} button="En savoir plus..." />
  <div
    class="bg-dark w-full border-t-4 border-secondary my-8 border-b-2 h-2 shadow-md"
  >
  </div>
  <!-- <div
    class="w-full h-56 bg-dark overflow-hidden flex justify-center items-center"
  >
    <Image
      data-parallax="2"
      src={TablesForegroundImage}
      widths={[240, 540, 720, TablesForegroundImage.width]}
      sizes={`(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 1600px) 720px, ${TablesForegroundImage.width}px`}
      alt="Tables du café vienne en avant plan avec terrasse en arrière plan"
      class="w-full object-cover object-center brightness-75"
    />
  </div> -->
  <div
    class="w-full py-16 bg-cover bg-center"
    style={`background-image: url(${CuisineImage.src})`}
  >
    <div
      class="max-w-screen-xl m-auto flex w-full justify-center items-center z-20"
    >
      <div class="w-3/5 p-8 bg-dark text-bright">
        <h2 class="text-4xl font-artdeco mb-8">Menu de la semaine</h2>
        <ul class="flex flex-col gap-4">
          {
            listDay.map((jour: (typeof listDay)[number]) => (
              <li>
                <h4 class="italic text-primary underline">{jour}</h4>
                <div class="w-full flex justify-between">
                  <span class="text-lg">
                    {strapiCarte.data.attributes[jour].titre}
                  </span>
                </div>
              </li>
            ))
          }
        </ul>
        <div class="w-2/5"></div>
      </div>
    </div>
    <section class="bg-bright">
      <div
        class="flex flex-row w-full max-w-screen-xl m-auto px-16 py-56 gap-8"
      >
        {
          listRedirections.map((redirection) => (
            <div class="w-1/3">
              <HomeRedirection
                title={redirection.title}
                description={redirection.description}
                link={redirection.link}
                image={redirection.image}
                alternative={redirection.alternative}
              />
            </div>
          ))
        }
      </div>
    </section>
    <section class="w-full bg-bright flex justify-center items-center py-56">
    </section>
  </div>
</Layout>
